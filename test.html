<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ­»å°æ¸¬é©—</title>
    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body class="h-100 d-flex flex-column">
    <main class="flex-shrink-0">
        <header class="fixed-top">
            <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm border-top border-5 border-primary py-4"
                style="background-color: #f8f6f7;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="./index.html">é¦–é </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
                        aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarText">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="./test.html">ç”Ÿæ­»å°æ¸¬é©—</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./cards.html">å°å¡ç‰‡</a>
                            </li>
                        </ul>
                        <span class="navbar-text">
                            æˆ‘å€‘çš„å°ç¶²é 
                        </span>
                    </div>
                </div>
            </nav>
        </header>

        <div class="wrap" id="bf-quiz">
            <h1>ç”Ÿæ­»å°æ¸¬é©— ğŸ¥°</h1>
            <p class="sub">è¦å‰‡ï¼šé¸æ“‡æœ€ç¬¦åˆçš„ç­”æ¡ˆï¼›é¸å®Œå³åˆ¤å®šï¼Œæœ€å¾Œæœ‰ç¸½åˆ†ã€‚</p>
            <p class="footer">å°æé†’ï¼šéŒ¯è¶…é2é¡Œä½ ä»Šå¤©ç¡åœ°æ¿~~~~</p>

            <div id="quiz"></div>

            <div class="quiz-card" id="result" style="display:none">
                <h2>æˆç¸¾å–®</h2>
                <p class="score" id="finalScore"></p>
                <p id="comment"></p>
                <details>
                    <summary>æŸ¥çœ‹ç­”é¡Œç‹€æ…‹</summary>
                    <div id="review"></div>
                </details>
                <div class="quiz-card" id="wishPanel" style="display:none; margin-top:12px;">
                    <h3>è¨±é¡˜æˆåŠŸ âœ¨</h3>
                    <p>ä»–çš„é¡˜æœ›ï¼š</p>
                    <blockquote id="wishText" style="margin:0;font-weight:700;"></blockquote>
                </div>
            </div>

            <div class="quiz-card">
                <div class="bar" aria-label="å®Œæˆåº¦"><i id="progress"></i></div>
                <div class="actions">
                    <button class="btn" id="finishBtn">çœ‹çµæœ</button>
                    <button class="btn secondary" id="resetBtn">é‡ç©ä¸€æ¬¡</button>
                    <span class="score" id="liveScore">å¾—åˆ†ï¼š0 / 10</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-5 bg-primary py-3 text-white text-center">
        <!-- .container>.row>.col-md-4*3{$} -->
        <div class="container">
            <div class="row text-center">
                <div class="col-md-12">
                    <p>ä¸å¯ä»¥é€€è²¨å–”</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
    <script>
        /** é¡Œåº«ï¼ˆæƒ³å®¢è£½å°±æ”¹é€™è£¡çš„é¡Œç›®ã€é¸é …ã€æ­£è§£ç´¢å¼• aï¼‰ */
        const QUESTIONS = [
            {
                q: "æˆ‘å€‘æ€éº¼è®Šç†Ÿçš„?", a: 2,
                opts: ["ä¸€èµ·å»è·¨å¹´", "æ‰“ç¾½çƒ", "ä¸€èµ·çœ‹æ›¸", "å¿˜äº†â€¦ä½†ä¸€å®šæ˜¯å‘½é‹å®‰æ’"]
            },
            {
                q: "æˆ‘æœ€å–œæ­¡çš„é£²æ–™åº—æ˜¯å“ªé–“ï¼Ÿ", a: 1,
                opts: ["50åµ", "å¯ä¸å¯", "å¾—æ­£", "æ¸…å¿ƒ"]
            },
            {
                q: "æˆ‘æœ€æ€•ä»€éº¼ï¼Ÿ", a: 1,
                opts: ["èŸ‘è‚", "è´è¶", "è¡£æœæ²’æ´—", "ä½ ä¸å›è¨Šæ¯"]
            },
            {
                q: "æˆ‘æœ€å–œæ­¡çš„é¡è‰²ï¼Ÿ", a: 0,
                opts: ["è—", "ç¶ ", "é»ƒ", "ç²‰"]
            },
            {
                q: "æˆ‘çš„ç”Ÿæ—¥ï¼Ÿ", a: 2,
                opts: ["90/04/27", "90/04/18", "91/04/27", "91/04/18"]
            },
            {
                q: "æˆ‘æœ€è¿‘è·Ÿä½ æŠ±æ€¨éçš„äº‹ï¼Ÿ", a: 2,
                opts: ["ä½ å¤ªåµ", "æ²’æ™‚é–“ä¼‘æ¯", "åŒå­¸å¤ªè‡­", "å¤©æ°£å¤ªç†±"]
            },
            {
                q: "æˆ‘è¿‘æœŸæœ€æƒ³å»æ—…è¡Œçš„åœ°æ–¹ï¼Ÿ", a: 0,
                opts: ["åŒ—æµ·é“æ»‘é›ª", "æ²–ç¹©æ½›æ°´", "é¦–çˆ¾é€›è¡—", "æ³°åœ‹åƒç¾é£Ÿ"]
            },
            {
                q: "æˆ‘æœ€å–œæ­¡ä½ çš„ä»€éº¼ï¼Ÿ", a: 2,
                opts: ["æ²’æœ‰", "èº«ä¸Šçš„å‘³é“", "ç™½ç™¡", "è°æ˜"]
            },
            {
                q: "æˆ‘å¿ƒæƒ…ä¸å¥½ä½ è©²å…ˆåšä»€éº¼ï¼Ÿ", a: 1,
                opts: ["ç«‹åˆ»è¬›é“ç†åˆ†æ", "è½æˆ‘æŠ±æ€¨", "è£æ­»ç­‰æˆ‘å¥½", "ä¸‹æˆ°æ£‹"]
            },
            {
                q: "æˆ‘æœ€è¨å­çš„å®¶äº‹ï¼Ÿ", a: 2,
                opts: ["æƒåœ°", "æ´—ç¢—", "æ›¬è¡£æœ", "å€’åƒåœ¾"]
            },
        ];

        const state = { answers: Array(QUESTIONS.length).fill(null), score: 0 };

        const quizEl = document.getElementById('quiz');
        const progressEl = document.getElementById('progress');
        const liveScoreEl = document.getElementById('liveScore');
        const resultEl = document.getElementById('result');
        const finalScoreEl = document.getElementById('finalScore');
        const commentEl = document.getElementById('comment');
        const reviewEl = document.getElementById('review');
        const finishBtn = document.getElementById('finishBtn');
        const resetBtn = document.getElementById('resetBtn');

        /** æ¸²æŸ“é¡Œç›® */
        function render() {
            quizEl.innerHTML = '';
            QUESTIONS.forEach((item, idx) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.innerHTML = `<p class="q-title">Q${idx + 1}. ${item.q}</p>`;
                item.opts.forEach((text, optIdx) => {
                    const id = `q${idx}_o${optIdx}`;
                    const opt = document.createElement('label');
                    opt.className = 'opt';
                    opt.innerHTML = `
        <input type="radio" name="q${idx}" id="${id}" value="${optIdx}">
        <span>${text}</span>
      `;
                    opt.querySelector('input').addEventListener('change', () => {
                        onPick(idx, optIdx, opt, card);
                    });
                    card.appendChild(opt);
                });
                quizEl.appendChild(card);
            });
            updateUI();
        }

        /** é¸æ“‡ç­”æ¡ˆï¼šå³åˆ¤å®šï¼‹è‘—è‰²ï¼‹æ›´æ–°åˆ†æ•¸/é€²åº¦ */
        function onPick(qIdx, optIdx, optEl, cardEl) {
            // æ¸…é™¤èˆŠæ¨£å¼
            [...cardEl.querySelectorAll('.opt')].forEach(o => o.classList.remove('correct', 'wrong'));
            // è¨˜éŒ„
            state.answers[qIdx] = optIdx;

            const isCorrect = (optIdx === QUESTIONS[qIdx].a);
            if (isCorrect) optEl.classList.add('correct');
            else {
                optEl.classList.add('wrong');
                const correctEl = cardEl.querySelector(`input[value="${QUESTIONS[qIdx].a}"]`).parentElement;
                correctEl.classList.add('correct');
            }
            // æç¤ºè¨Šæ¯
            if (!cardEl.querySelector('.msg')) {
                const msg = document.createElement('div');
                msg.className = 'msg';
                msg.textContent = isCorrect ? 'âœ” ç­”å°äº†ï¼' : 'âœ˜ ^_^';
                cardEl.appendChild(msg);
            } else {
                cardEl.querySelector('.msg').textContent = isCorrect ? 'âœ” ç­”å°äº†ï¼' : 'âœ˜ ^_^';
            }
            updateUI();
        }

        /** æ›´æ–°é€²åº¦æ¢èˆ‡å³æ™‚åˆ†æ•¸ */
        function updateUI() {
            const answered = state.answers.filter(a => a !== null).length;
            state.score = state.answers.reduce((sum, a, idx) => sum + (a === QUESTIONS[idx].a ? 1 : 0), 0);
            progressEl.style.width = Math.round(answered / QUESTIONS.length * 100) + '%';
            liveScoreEl.textContent = `å¾—åˆ†ï¼š${state.score} / ${QUESTIONS.length}`;
        }

        /** é¡¯ç¤ºçµæœ */
        function showResult() {
            const total = QUESTIONS.length;
            const s = state.score;
            let txt = '';
            if (s === total) txt = 'å¤ªå²å®³äº†å§å¯¶å¯¶!!!!!! ğŸ’¯';
            else if (s >= total - 2) txt = 'å‹‰å¼·æ¥å— â¤ï¸';
            else if (s >= Math.ceil(total * 0.6)) txt = 'ç¡åœ°æ¿å›‰~~~~~~~';
            else txt = '??????????????????????';

            finalScoreEl.textContent = `æœ€çµ‚å¾—åˆ†ï¼š${s} / ${total}`;
            commentEl.textContent = txt;

            reviewEl.innerHTML = QUESTIONS.map((q, i) => {
                const user = state.answers[i];
                const ok = user === q.a;
                return `<p><span class="badge ${ok ? 'ok' : 'bad'}">${ok ? 'âœ” æ­£ç¢º' : 'âœ˜ éŒ¯èª¤'}</span>
      Q${i + 1} ${q.q}<br>
      ä½ çš„ç­”æ¡ˆï¼š${user !== null ? q.opts[user] : 'æœªä½œç­”'}ï¼› æ­£è§£ï¼š${q.opts[q.a]}
    </p>`;
            }).join('');
            resultEl.style.display = 'block';
            // æ²åˆ°çµæœ
            const y = resultEl.getBoundingClientRect().top + window.scrollY - 20;
            window.scrollTo({ top: y, behavior: 'smooth' });
        }

        /** é‡ç½® */
        function resetAll() {
            state.answers = Array(QUESTIONS.length).fill(null);
            state.score = 0;
            resultEl.style.display = 'none';
            render();
        }

        /** ç¶å®šäº‹ä»¶ä¸¦åˆå§‹åŒ– */
        finishBtn.addEventListener('click', showResult);
        resetBtn.addEventListener('click', resetAll);
        render();
    </script>
</body>

</html>